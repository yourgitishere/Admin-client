swagger: '2.0'
info:
  title: Document Management
  description: >-
    This is Swagger UI environment generated for the TMF Document Management
    specification
  version: '1.0.0'
host: serverRoot
basePath: /documentManagement
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /document:
    post:
      operationId: createDocument
      summary: Creates a 'Document'
      tags:
        - document
      parameters:
        - schema:
            $ref: '#/definitions/Document_Create'
          required: true
          in: body
          name: document
          description: The Document to be created
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/DocumentId'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error'
      security:
        - docuservice_auth: []      
  '/document/{id}':
    get:
      operationId: retrieveDocument
      summary: Retrieves a 'Document' by Id
      tags:
        - document
      parameters:
        - required: true
          type: string
          name: id
          in: path
          description: Identifier of the Document
      responses:
        '200':
          description: Ok
          schema:
              $ref: '#/definitions/Attachment'
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error'
      security:
        - docuservice_auth: []
    patch:
      operationId: updateDocument
      summary: Updates partially a 'Document' by Id
      tags:
        - document
      parameters:
        - required: true
          type: string
          name: id
          in: path
          description: Identifier of the Document
        - schema:
            $ref: '#/definitions/Document_MetadataUpdate'
          required: true
          in: body
          name: documentMetadataUpdate
          description: The Document characteristics to be updated
      responses:
        '201':
          description: Updated
        '400':
          description: Bad Request
          schema:
            $ref: '#/definitions/Error'
        '404':
          description: Not Found
          schema:
            $ref: '#/definitions/Error'
        '500':
          description: Internal Server Error
          schema:
            $ref: '#/definitions/Error'
      security:
        - docuservice_auth: []      
securityDefinitions:
  docuservice_auth:
    type: basic
    
definitions:
  Document_Create:
    type: object
    description: |-
      Document is a tangible output from an activity
      Skipped properties: id,href
    required:
      - sourceApp
      - attachment
      - type
      - characteristic
    properties:
      sourceApp:
        type: string
        description: Source Application Name
      correlationID:
        type: string
        description: Unique identifier for the message which can be used for end to end tracking of the message.
      type:
        type: string
        description: Type of document like vi_loop, vi_correspondence
      attachment:
          $ref: '#/definitions/Attachment'
      characteristic:
        type: array
        items:
          $ref: '#/definitions/DocumentCharacteristic'
      deleteDate:  
        type: string
        format: date-time
        description: >-
          Date, when the document can be deleted � optional from interface perspective � but should be provided � otherwise a process has to be defined when the document should be deleted.
      aclName:
        type: string
        description: acl level for document access
  Document_MetadataUpdate:
    type: object
    description: |-
      Document is a tangible output from an activity
      Skipped properties: id,href,id,href
    required:
      - sourceApp
      - characteristic
    properties:
      sourceApp:
        type: string
        description: Source Application Name
      correlationID:
        type: string
        description: Unique identifier for the message which can be used for end to end tracking of the message.
      characteristic:
        type: array
        items:
          $ref: '#/definitions/DocumentCharacteristic'
  DocumentCharacteristic:
    type: object
    description: is a list of name value pairs that define the document characteristics.
    required:
      - name
      - value
    properties:
      name:
        type: string
        description: name of the characteristic
      value:
        type: string
      valueType:
        type: string
        description: Data type of the value of the characteristic
  Attachment:
    type: object
    description: 'Complements the description of an element (for instance a product) through video, pictures...'
    required:
      - content
      - mimeType
    properties:
      content:
        type: string
        format: byte
        description: 'The actual contents of the attachment object, if embedded, encoded as base64'
      mimeType:
        type: string
        description: 'Attachment mime type such as extension file for video, picture and document'
  Error:
    description: 'Used when an API throws an Error, typically with a HTTP error response-code (3xx, 4xx, 5xx)'
    type: object
    required:
      - reason
    properties:
      code:
        type: string
        description: 'Application relevant detail, defined in the API or a common list.'
      reason:
        type: string
        description: Explanation of the reason for the error which can be shown to a client user.
      status:
        type: string
        description: HTTP Error code extension
  DocumentId:
    description: Document Id of archived the document
    type: object
    required:
      - id
    properties:
      id:
        type: string
        description: Archive id of the archived document.